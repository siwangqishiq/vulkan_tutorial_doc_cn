# 顶点缓冲

## 顶点输入描述

### 介绍

在后面的几个章节中，我们准备使用内存中的顶点缓冲去替换硬编码在顶点着色器中的顶点数据。首先我们使用最简单的，从CPU可见内存中利用 memcpy 直接拷贝数据的方式,之后我们会使用一个暂存缓冲区拷贝数据到高性能内存的方式。

### 顶点着色器

首先修改顶点着色器让它不再包含顶点数据,使用 in 关键字去接收顶点缓存数据.

```glsl
#version 450

layout(location = 0) in vec2 inPosition;
layout(location = 1) in vec3 inColor;

layout(location = 0) out vec3 fragColor;

void main(){
    gl_Position = vec4(inPosition, 0.0 , 1.0);
    fragColor = inColor;
}
```

inPosition 和 inColor 变量是顶点属性,它们是在顶点缓冲区中逐顶点设置的属性,就像我们手动通过两个数组指定每个顶点的颜色和位置一样,确保重新编译了这个顶点着色器.

就像 fragColor，layout(location = x) 注解标注了出的索引，之后可以引用它们，有一点很重要，它们中的一些类型,例如 dvec3 代表64位的向量类型,会占用多个槽位，这意味着,这之后的索引必须至少递增2以上。

```glsl
layout(location = 0) in dvec3 inPosition;
layout(location = 2) in vec3 inColor;
```

你可以在布局说明的文档中找到更多的信息[ OpenGL wiki.](https://www.khronos.org/opengl/wiki/Layout_Qualifier_(GLSL))